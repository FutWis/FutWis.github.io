<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FutWis</title>
  <link rel="stylesheet" href="index.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico" />

  <!-- Import the Firebase SDKs here -->
  <script src="https://www.gstatic.com/firebasejs/9.2.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.2.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.2.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.2.0/firebase-analytics.js"></script>

  <script>
    // Replace with your project's config object
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDEklNr59OF3Dncht4MiwNIQN9X-oWwpuk",
  authDomain: "futwis-32f19.firebaseapp.com",
  projectId: "futwis-32f19",
  storageBucket: "futwis-32f19.appspot.com",
  messagingSenderId: "305911660382",
  appId: "1:305911660382:web:0b9c2a942cf5df096a19cf",
  measurementId: "G-08X9SY5RHD"
};
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
  </script>

  <script defer src="index.js"></script>
</head>

<body>
  <header>
    <img src="futwis.png" alt="FutWis Logo" id="logo">
    <h1>Welcome to FutWis</h1>
  </header>
  <div id="time"></div>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="players.html">Players</a></li>
      <li><a href="search.html">Player Search</a></li>
      <li><a href="matches.html">Play Matches</a></li>
    </ul>
  </nav>
  <main>
    <section>
      <h2>Open a Pack</h2>
      <div class="pack-container">
        <h1>Bronze Pack (SOON)</h1>
        <img id="openBronzePackImage" src="bronze_pack.png" alt="Bronze Pack">
        <div class="pack-feed" id="bronzePackFeed"></div>
        <div class="pack-contents" id="bronzePackContents"></div>
      </div>
      <div class="pack-container">
        <h1>Silver Pack (SOON)</h1>
        <img id="openSilverPackImage" src="silver_pack.png" alt="Silver Pack">
        <div class="pack-feed" id="silverPackFeed"></div>
        <div class="pack-contents" id="silverPackContents"></div>
      </div>
      <div class="pack-container">
        <h1>Gold Pack</h1>
        <img id="openGoldPackImage" src="gold_pack.png" alt="Gold Pack">
        <div class="pack-feed" id="goldPackFeed"></div>
        <div class="pack-contents" id="goldPackContents"></div>
      </div>
      <div class="pack-container">
        <h1>Icon Pack (SOON)</h1>
        <img id="openIconPackImage" src="icon_pack.png" alt="Icon Pack">
        <div class="pack-feed" id="iconPackFeed"></div>
        <div class="pack-contents" id="iconPackContents"></div>
      </div>
      <div class="pack-container">
        <h1>All Players Pack</h1>
        <img id="openAllPlayersPackImage" src="allplayerspack.png" alt="All Players Pack">
        <div class="pack-feed" id="allPlayersPackFeed"></div>
        <div class="pack-contents" id="allPlayersPackContents"></div>
      </div>
    </section>
    <section>
      <h2>Sign Up</h2>
      <form class="form" id="signup-form">
        <div class="form-group">
          <label for="name">Full Name:</label>
          <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
          <label for="email">Email Address:</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" id="password" name="password" minlength="8" required>
        </div>
        <div class="form-group">
          <label for="age">Age:</label>
          <input type="number" id="age" name="age" required>
        </div>
        <button type="submit" class="btn btn-primary" id="signup-btn">Sign Up</button>
      </form>
    </section>
    <section>
      <h2>Login</h2>
      <form class="form" id="login-form">
        <div class="form-group">
          <label for="email">Email Address:</label>
          <input type="email" id="login-email" name="email" required>
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" id="login-password" name="password" required>
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
      </form>
    </section>
  </main>
  <footer>
    <p>&copy; 2023 FutWis</p>
  </footer>
  <button id="refreshPacksButton" class="refreshpacks-button">Refresh Packs</button>
  <script>
    function updateTime() {
      const now = new Date();
      const timeElement = document.getElementById('time');
      timeElement.textContent = now.toLocaleTimeString();
    }

    updateTime();
    setInterval(updateTime, 1000);

    const signupForm = document.getElementById('signup-form');
    const loginForm = document.getElementById('login-form');

    signupForm.addEventListener('submit', async function(event) {
      event.preventDefault();

      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const age = document.getElementById('age').value;

      try {
        // Use Firebase Authentication to create a new user account
        const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);

        // Store additional user data in Cloud Firestore
        await firebase.firestore().collection('users').doc(userCredential.user.uid).set({
          name: name,
          email: email,
          age: parseInt(age)
        });

        alert('Account created successfully!');
        window.location.href = 'index.html'; // Redirect to index page after successful sign-up
      } catch (error) {
        alert(error.message);
      }
    });

    loginForm.addEventListener('submit', async function(event) {
      event.preventDefault();

      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;

      try {
        // Use Firebase Authentication to sign in the user
        await firebase.auth().signInWithEmailAndPassword(email, password);

        alert('Login successful!');
        console.log(firebase.auth().currentUser.uid);
      } catch (error) {
        if (error.code === 'auth/wrong-password') {
          alert('Wrong password. Please try again.');
        } else if (error.code === 'auth/user-not-found') {
          alert('User does not exist. Please sign up first.');
        } else {
          alert(error.message);
        }
      }
    });
  </script>
</body>

</html>